{"id":"a73beb09-bf42-4213-9b1d-5c75b7267fbb","revision":0,"last_node_id":263,"last_link_id":242,"nodes":[{"id":2,"type":"SetNode","pos":[330,540],"size":[210,58],"flags":{"collapsed":true},"order":130,"mode":0,"inputs":[{"name":"INT","type":"INT","link":26}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_vid_width","properties":{"previousName":""},"widgets_values":["vid_width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":46,"type":"GetNode","pos":[3557.6562220801075,834.139475487061],"size":[210,50],"flags":{"collapsed":true},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[40]}],"title":"Get_vid_resized","properties":{},"widgets_values":["vid_resized"]},{"id":3,"type":"SetNode","pos":[330,580],"size":[210,50],"flags":{"collapsed":true},"order":131,"mode":0,"inputs":[{"name":"INT","type":"INT","link":27}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_vid_height","properties":{"previousName":""},"widgets_values":["vid_height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":67,"type":"GetNode","pos":[880,590],"size":[210,58],"flags":{"collapsed":true},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[60]}],"title":"Get_vid_width","properties":{},"widgets_values":["vid_width"]},{"id":84,"type":"SetNode","pos":[-790,440],"size":[210,60],"flags":{"collapsed":true},"order":88,"mode":0,"inputs":[{"name":"WANVAE","type":"WANVAE","link":73}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_vae","properties":{"previousName":"vae"},"widgets_values":["vae"],"color":"#322","bgcolor":"#533"},{"id":93,"type":"GetNode","pos":[-1810,1330],"size":[210,50],"flags":{"collapsed":true},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[81]}],"title":"Get_clip_vision","properties":{},"widgets_values":["clip_vision"],"color":"#432","bgcolor":"#653"},{"id":91,"type":"WanVideoDecode","pos":[-530,1320],"size":[280.3896179199219,198],"flags":{},"order":136,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","link":92},{"localized_name":"samples","name":"samples","type":"LATENT","link":79},{"localized_name":"enable_vae_tiling","name":"enable_vae_tiling","type":"BOOLEAN","widget":{"name":"enable_vae_tiling"},"link":null},{"localized_name":"tile_x","name":"tile_x","type":"INT","widget":{"name":"tile_x"},"link":null},{"localized_name":"tile_y","name":"tile_y","type":"INT","widget":{"name":"tile_y"},"link":null},{"localized_name":"tile_stride_x","name":"tile_stride_x","type":"INT","widget":{"name":"tile_stride_x"},"link":null},{"localized_name":"tile_stride_y","name":"tile_stride_y","type":"INT","widget":{"name":"tile_stride_y"},"link":null},{"localized_name":"normalization","name":"normalization","shape":7,"type":"COMBO","widget":{"name":"normalization"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","slot_index":0,"links":[80]}],"properties":{"Node name for S&R":"WanVideoDecode","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788"},"widgets_values":[false,272,272,144,128,"default"]},{"id":104,"type":"GetNode","pos":[-530,1280],"size":[210,50],"flags":{"collapsed":true},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"WANVAE","type":"WANVAE","links":[92]}],"title":"Get_vae","properties":{},"widgets_values":["vae"],"color":"#322","bgcolor":"#533"},{"id":115,"type":"GetNode","pos":[5220,50],"size":[210,50],"flags":{"collapsed":true},"order":4,"mode":4,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[100]}],"title":"Get_vid_sampled","properties":{},"widgets_values":["vid_sampled"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":111,"type":"GetNode","pos":[5030,310],"size":[210,50],"flags":{"collapsed":true},"order":5,"mode":4,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[96]}],"title":"Get_img_ref","properties":{},"widgets_values":["img_ref"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":109,"type":"GetNode","pos":[5000,360],"size":[210,50],"flags":{"collapsed":true},"order":6,"mode":4,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[]}],"title":"Get_img_face","properties":{},"widgets_values":["img_face"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":110,"type":"GetNode","pos":[4990,410],"size":[210,50],"flags":{"collapsed":true},"order":7,"mode":4,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[98]}],"title":"Get_img_pose","properties":{},"widgets_values":["img_pose"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":73,"type":"GetNode","pos":[1760,280],"size":[210,58],"flags":{"collapsed":true},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[66]}],"title":"Get_vid_resized","properties":{},"widgets_values":["vid_resized"]},{"id":118,"type":"GetNode","pos":[-890,1290],"size":[210,60],"flags":{"collapsed":true},"order":9,"mode":0,"inputs":[],"outputs":[{"name":"WANVIDEOMODEL","type":"WANVIDEOMODEL","links":[102]}],"title":"Get_model_wan","properties":{},"widgets_values":["model_wan"],"color":"#223","bgcolor":"#335"},{"id":72,"type":"GetNode","pos":[1750,90],"size":[210,50],"flags":{"collapsed":true},"order":10,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[65]}],"title":"Get_vid_resized","properties":{},"widgets_values":["vid_resized"]},{"id":69,"type":"GetNode","pos":[1760,130],"size":[210,50],"flags":{"collapsed":true},"order":11,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[63]}],"title":"Get_vid_width","properties":{},"widgets_values":["vid_width"]},{"id":68,"type":"GetNode","pos":[1760,170],"size":[210,50],"flags":{"collapsed":true},"order":12,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[62]}],"title":"Get_vid_height","properties":{},"widgets_values":["vid_height"]},{"id":94,"type":"GetNode","pos":[-1810,1290],"size":[210,50],"flags":{"collapsed":true},"order":13,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[82]}],"title":"Get_img_ref","properties":{},"widgets_values":["img_ref"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":116,"type":"GetNode","pos":[1270,1250],"size":[210,50],"flags":{"collapsed":true},"order":14,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[101]}],"title":"Get_vid_sampled","properties":{},"widgets_values":["vid_sampled"]},{"id":82,"type":"WanVideoTorchCompileSettings","pos":[-1820,170],"size":[310,210],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"backend","name":"backend","type":"COMBO","widget":{"name":"backend"},"link":null},{"localized_name":"fullgraph","name":"fullgraph","type":"BOOLEAN","widget":{"name":"fullgraph"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"dynamic","name":"dynamic","type":"BOOLEAN","widget":{"name":"dynamic"},"link":null},{"localized_name":"dynamo_cache_size_limit","name":"dynamo_cache_size_limit","type":"INT","widget":{"name":"dynamo_cache_size_limit"},"link":null},{"localized_name":"compile_transformer_blocks_only","name":"compile_transformer_blocks_only","type":"BOOLEAN","widget":{"name":"compile_transformer_blocks_only"},"link":null},{"localized_name":"dynamo_recompile_limit","name":"dynamo_recompile_limit","shape":7,"type":"INT","widget":{"name":"dynamo_recompile_limit"},"link":null}],"outputs":[{"localized_name":"torch_compile_args","name":"torch_compile_args","type":"WANCOMPILEARGS","slot_index":0,"links":[68]}],"properties":{"Node name for S&R":"WanVideoTorchCompileSettings","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788"},"widgets_values":["inductor",false,"default",false,64,true,128]},{"id":85,"type":"SetNode","pos":[-790,620],"size":[210,50],"flags":{"collapsed":true},"order":87,"mode":0,"inputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","link":74}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_clip_vision","properties":{"previousName":"clip_vision"},"widgets_values":["clip_vision"],"color":"#432","bgcolor":"#653"},{"id":26,"type":"SetNode","pos":[10,1330],"size":[210,34],"flags":{"collapsed":true},"order":91,"mode":0,"inputs":[{"name":"INT","type":"INT","link":21}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_vid_resolution","properties":{"previousName":""},"widgets_values":["vid_resolution"],"color":"#1b4669","bgcolor":"#29699c"},{"id":27,"type":"SetNode","pos":[10,1510],"size":[210,34],"flags":{"collapsed":true},"order":83,"mode":0,"inputs":[{"name":"INT","type":"INT","link":22}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_fps_multiply","properties":{"previousName":""},"widgets_values":["fps_multiply"],"color":"#1b4669","bgcolor":"#29699c"},{"id":70,"type":"GetNode","pos":[2280,80],"size":[210,50],"flags":{"collapsed":true},"order":16,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[64]}],"title":"Get_img_pose","properties":{},"widgets_values":["img_pose"]},{"id":11,"type":"GetNode","pos":[-270,100],"size":[210,34],"flags":{"collapsed":true},"order":17,"mode":0,"inputs":[],"outputs":[{"name":"FLOAT","type":"FLOAT","links":[9]}],"title":"Get_fps_new","properties":{},"widgets_values":["fps_new"]},{"id":163,"type":"SetNode","pos":[270,1510],"size":[210,50],"flags":{"collapsed":true},"order":86,"mode":0,"inputs":[{"name":"INT","type":"INT","link":130}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_divide_FWS","properties":{"previousName":"divide_FWS"},"widgets_values":["divide_FWS"],"color":"#1b4669","bgcolor":"#29699c"},{"id":145,"type":"SetNode","pos":[530,2510],"size":[210,50],"flags":{"collapsed":true},"order":138,"mode":0,"inputs":[{"name":"INT","type":"INT","link":118}],"outputs":[{"name":"INT","type":"INT","links":[120]}],"title":"Set_frame_WinSize","properties":{"previousName":"frame_WinSize"},"widgets_values":["frame_WinSize"],"color":"#1b4669","bgcolor":"#29699c"},{"id":107,"type":"SetNode","pos":[-520,1710],"size":[210,50],"flags":{"collapsed":true},"order":143,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":94}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_vid_sampled","properties":{"previousName":"vid_sampled"},"widgets_values":["vid_sampled"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":9,"type":"GenerateFramesByCount","pos":[540,190],"size":[270,82],"flags":{"collapsed":true},"order":129,"mode":0,"inputs":[{"localized_name":"frames","name":"frames","type":"IMAGE","link":134},{"localized_name":"frame_count","name":"frame_count","type":"INT","widget":{"name":"frame_count"},"link":null},{"localized_name":"revert","name":"revert","type":"BOOLEAN","widget":{"name":"revert"},"link":null}],"outputs":[{"localized_name":"frames","name":"frames","type":"IMAGE","links":[8]}],"properties":{"Node name for S&R":"GenerateFramesByCount","cnr_id":"comfyui-mixlab-nodes","ver":"b2bb1876def6330fccf1e03cc69d2166cae7bedb","widget_ue_connectable":{}},"widgets_values":[1,true]},{"id":8,"type":"GetNode","pos":[140,100],"size":[210,34],"flags":{"collapsed":true},"order":18,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[116]}],"title":"Get_vid_resolution","properties":{},"widgets_values":["vid_resolution"]},{"id":112,"type":"GetNode","pos":[4990,460],"size":[210,58],"flags":{"collapsed":true},"order":19,"mode":4,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[99]}],"title":"Get_vid_resized","properties":{},"widgets_values":["vid_resized"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":29,"type":"INTConstant","pos":[10,1410],"size":[210,58],"flags":{"collapsed":false},"order":20,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"value","name":"value","type":"INT","links":[22]}],"title":"üîÄ Interpolation factor","properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"1.1.2"},"widgets_values":[2],"color":"#5e549a","bgcolor":"#4a4086"},{"id":164,"type":"GetNode","pos":[530,2410],"size":[210,50],"flags":{"collapsed":true},"order":21,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[131]}],"title":"Get_divide_FWS","properties":{},"widgets_values":["divide_FWS"],"color":"#1b4669","bgcolor":"#29699c"},{"id":4,"type":"SetNode","pos":[150,540],"size":[210,50],"flags":{"collapsed":true},"order":128,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":28}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_vid_resized","properties":{"previousName":""},"widgets_values":["vid_resized"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":166,"type":"MarkdownNote","pos":[530,1400],"size":[330,230],"flags":{"collapsed":false},"order":22,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["If you are having Out Of Memory errors in the \"WanVideo Animate Embeds\" step,  it is probably because your VRAM can't handle the original amount of Frames and resolution all at once. To (maybe) solve it, increase the value in \"Divide FWS\" by 1 until it fits in VRAM.\n\n‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê ‚Üê \n\nIf that doesn't work, try the \"Divide FWS\" method again, but now enable the \"tiled_vae\" in the \"WanVideo Animate Embeds\".\n\nIf neither methods work you'll have to accept the hardware limitations and decrease the video resolution."],"color":"#432","bgcolor":"#653"},{"id":16,"type":"SetNode","pos":[880,1040],"size":[210,34],"flags":{"collapsed":true},"order":117,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":54}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_img_ref","properties":{"previousName":""},"widgets_values":["img_ref"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":121,"type":"SetNode","pos":[710,2150],"size":[210,34],"flags":{"collapsed":true},"order":127,"mode":0,"inputs":[{"name":"WANVIDEOTEXTEMBEDS","type":"WANVIDEOTEXTEMBEDS","link":104}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_final_prompt","properties":{"previousName":""},"widgets_values":["final_prompt"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":103,"type":"GetNode","pos":[-1520,1670],"size":[210,50],"flags":{"collapsed":true},"order":23,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[91]}],"title":"Get_vid_frame_count","properties":{},"widgets_values":["vid_frame_count"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":146,"type":"GetNode","pos":[-1510,1710],"size":[210,50],"flags":{"collapsed":true},"order":24,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[132]}],"title":"Get_frame_WinSize","properties":{},"widgets_values":["frame_WinSize"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":100,"type":"GetNode","pos":[-1450,1300],"size":[210,50],"flags":{"collapsed":true},"order":25,"mode":0,"inputs":[],"outputs":[{"name":"WANVAE","type":"WANVAE","links":[88]}],"title":"Get_vae","properties":{},"widgets_values":["vae"],"color":"#322","bgcolor":"#533"},{"id":126,"type":"GetNode","pos":[-890,1240],"size":[210,50],"flags":{"collapsed":true},"order":26,"mode":0,"inputs":[],"outputs":[{"name":"WANVIDEOTEXTEMBEDS","type":"WANVIDEOTEXTEMBEDS","links":[109]}],"title":"Get_final_prompt","properties":{},"widgets_values":["final_prompt"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":144,"type":"MathExpression|pysssss","pos":[530,2470],"size":[210,128],"flags":{"collapsed":true},"order":133,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":123},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":131},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","slot_index":0,"links":[118]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","slot_index":1,"links":[]}],"title":"Calculate FWS","properties":{"Node name for S&R":"MathExpression|pysssss","cnr_id":"comfyui-custom-scripts","ver":"1.2.0"},"widgets_values":["ceil(a/b)"]},{"id":171,"type":"RIFE VFI","pos":[1780,1630],"size":[300,200],"flags":{"collapsed":false},"order":108,"mode":0,"inputs":[{"localized_name":"frames","name":"frames","type":"IMAGE","link":135},{"localized_name":"optional_interpolation_states","name":"optional_interpolation_states","shape":7,"type":"INTERPOLATION_STATES","link":null},{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null},{"localized_name":"clear_cache_after_n_frames","name":"clear_cache_after_n_frames","type":"INT","widget":{"name":"clear_cache_after_n_frames"},"link":150},{"localized_name":"multiplier","name":"multiplier","type":"INT","widget":{"name":"multiplier"},"link":149},{"localized_name":"fast_mode","name":"fast_mode","type":"BOOLEAN","widget":{"name":"fast_mode"},"link":null},{"localized_name":"ensemble","name":"ensemble","type":"BOOLEAN","widget":{"name":"ensemble"},"link":null},{"localized_name":"scale_factor","name":"scale_factor","type":"COMBO","widget":{"name":"scale_factor"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[142]}],"title":"RIFE VFI","properties":{"Node name for S&R":"RIFE VFI","cnr_id":"comfyui-frame-interpolation","ver":"c336f7184cb1ac1243381e725fea1ad2c0a10c09"},"widgets_values":["rife49.pth",16,7,false,true,1]},{"id":170,"type":"GetNode","pos":[1770,1560],"size":[210,50],"flags":{"collapsed":true},"order":27,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[135]}],"title":"Get_vid_sampled","properties":{},"widgets_values":["vid_sampled"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":189,"type":"MathExpression|pysssss","pos":[1910,1370],"size":[210,130],"flags":{"collapsed":true},"order":85,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":151},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":152},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","slot_index":0,"links":[]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","slot_index":1,"links":[154]}],"title":"Calculate new FR","properties":{"Node name for S&R":"MathExpression|pysssss","cnr_id":"comfyui-custom-scripts","ver":"1.2.0"},"widgets_values":["a*b"]},{"id":175,"type":"GetNode","pos":[1730,1370],"size":[210,50],"flags":{"collapsed":true},"order":28,"mode":0,"inputs":[],"outputs":[{"name":"FLOAT","type":"FLOAT","links":[141,151]}],"title":"Get_fps_new","properties":{},"widgets_values":["fps_new"]},{"id":177,"type":"GetNode","pos":[1730,1320],"size":[210,50],"flags":{"collapsed":true},"order":29,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[149,152]}],"title":"Get_fps_multiply","properties":{},"widgets_values":["fps_multiply"],"color":"#1b4669","bgcolor":"#29699c"},{"id":108,"type":"ImageConcatMulti","pos":[5220,100],"size":[270,150],"flags":{},"order":107,"mode":4,"inputs":[{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":100},{"localized_name":"image_2","name":"image_2","shape":7,"type":"IMAGE","link":95},{"localized_name":"inputcount","name":"inputcount","type":"INT","widget":{"name":"inputcount"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null},{"localized_name":"match_image_size","name":"match_image_size","type":"BOOLEAN","widget":{"name":"match_image_size"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[144]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"468fcc86f0b29e79a8510e8239eb15714d6747a6"},"widgets_values":[2,"left",true,null]},{"id":113,"type":"ImageConcatMulti","pos":[5220,310],"size":[270,190],"flags":{},"order":82,"mode":4,"inputs":[{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":96},{"localized_name":"image_2","name":"image_2","shape":7,"type":"IMAGE","link":null},{"localized_name":"inputcount","name":"inputcount","type":"INT","widget":{"name":"inputcount"},"link":null},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null},{"localized_name":"match_image_size","name":"match_image_size","type":"BOOLEAN","widget":{"name":"match_image_size"},"link":null},{"name":"image_3","shape":7,"type":"IMAGE","link":98},{"name":"image_4","shape":7,"type":"IMAGE","link":99}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[95]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"468fcc86f0b29e79a8510e8239eb15714d6747a6"},"widgets_values":[4,"down",true,null]},{"id":179,"type":"VHS_VideoCombine","pos":[5540,100],"size":[530,334],"flags":{},"order":125,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":144},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null},{"name":"pix_fmt","type":["yuv420p","yuv420p10le"],"widget":{"name":"pix_fmt"},"link":null},{"name":"crf","type":"INT","widget":{"name":"crf"},"link":null},{"name":"save_metadata","type":"BOOLEAN","widget":{"name":"save_metadata"},"link":null},{"name":"trim_to_audio","type":"BOOLEAN","widget":{"name":"trim_to_audio"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine","cnr_id":"comfyui-videohelpersuite","ver":"8e4d79471bf1952154768e8435a9300077b534fa"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"Wanimate","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"Wanimate_00026.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"Wanimate_00026.png","fullpath":"S:\\BKP_AI\\ComfyUI_NEW\\ComfyUI\\output\\Wanimate_00026.mp4"},"muted":true}}},{"id":183,"type":"MarkdownNote","pos":[-60,2250],"size":[980,88],"flags":{"collapsed":false},"order":30,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["‚Üì‚Üì‚Üì Here the Frame Size Window is calculated.\nThere's no need to mess with it if you don't want or need."],"color":"#432","bgcolor":"#653"},{"id":148,"type":"easy showAnything","pos":[290,2410],"size":[210,88],"flags":{"collapsed":false},"order":132,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":121}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":[]}],"title":"Frame Count","properties":{"Node name for S&R":"easy showAnything","cnr_id":"comfyui-easy-use","ver":"1.3.1"},"widgets_values":["110"]},{"id":21,"type":"MathExpression|pysssss","pos":[110,2410],"size":[210,128],"flags":{"collapsed":true},"order":95,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":17},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":18},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","slot_index":0,"links":[19]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","slot_index":1,"links":[]}],"title":"Calculate Frames","properties":{"Node name for S&R":"MathExpression|pysssss","cnr_id":"comfyui-custom-scripts","ver":"1.2.0"},"widgets_values":["(a*b)+1"]},{"id":147,"type":"easy showAnything","pos":[710,2410],"size":[210,88],"flags":{},"order":141,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":120}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"title":"Window Frame Size","properties":{"Node name for S&R":"easy showAnything","cnr_id":"comfyui-easy-use","ver":"1.3.1"},"widgets_values":["110"]},{"id":176,"type":"CM_FloatToInt","pos":[1760,1500],"size":[270,58],"flags":{"collapsed":true},"order":84,"mode":0,"inputs":[{"localized_name":"a","name":"a","type":"FLOAT","widget":{"name":"a"},"link":141}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[150]}],"properties":{"Node name for S&R":"CM_FloatToInt","cnr_id":"ComfyMath","ver":"c01177221c31b8e5fbc062778fc8254aeb541638"},"widgets_values":[0]},{"id":182,"type":"Label (rgthree)","pos":[-1140,1110],"size":[206.0833282470703,36],"flags":{"allow_interaction":true},"order":31,"mode":0,"inputs":[],"outputs":[],"title":"Generation¬†‚Üì","properties":{"fontSize":36,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":192,"type":"Label (rgthree)","pos":[1630,1110],"size":[148.03334045410156,36],"flags":{"allow_interaction":true},"order":32,"mode":0,"inputs":[],"outputs":[],"title":"Results¬†‚Üì","properties":{"fontSize":36,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":193,"type":"MarkdownNote","pos":[-1830,860],"size":[320,88],"flags":{"collapsed":false},"order":33,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Set the Block Swaps to what works for your config.\n\nIf \"blocks_to_swap\" is less than 40, then set \"prefetch_blocks\" to 1"],"color":"#432","bgcolor":"#653"},{"id":181,"type":"MarkdownNote","pos":[370,810],"size":[250,90],"flags":{"collapsed":false},"order":34,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Just set the Resolution at the \"Main Control Center\" and the nodes will resize the video and reference image accordingly."],"color":"#432","bgcolor":"#653"},{"id":194,"type":"Label (rgthree)","pos":[1080,-90],"size":[250.10000610351562,36],"flags":{"allow_interaction":true},"order":35,"mode":0,"inputs":[],"outputs":[],"title":"Image Loader ‚Üì","properties":{"fontSize":36,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":133,"type":"Label (rgthree)","pos":[130,-100],"size":[241.48333740234375,36],"flags":{"allow_interaction":true},"order":36,"mode":0,"inputs":[],"outputs":[],"title":"Video Loader ‚Üì","properties":{"fontSize":36,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":195,"type":"Label (rgthree)","pos":[-1210,-110],"size":[248.10000610351562,36],"flags":{"allow_interaction":true},"order":37,"mode":0,"inputs":[],"outputs":[],"title":"Model Loader ‚Üì","properties":{"fontSize":36,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":196,"type":"Label (rgthree)","pos":[2040,-100],"size":[272.0666809082031,36],"flags":{"allow_interaction":true},"order":38,"mode":0,"inputs":[],"outputs":[],"title":"Pose Estimator ‚Üì","properties":{"fontSize":36,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":197,"type":"Label (rgthree)","pos":[200,1110],"size":[350.0833435058594,36],"flags":{"allow_interaction":true},"order":39,"mode":0,"inputs":[],"outputs":[],"title":"Main Control Center ‚Üì","properties":{"fontSize":36,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":161,"type":"INTConstant","pos":[260,1410],"size":[210,58],"flags":{"collapsed":false},"order":40,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"value","name":"value","type":"INT","links":[130]}],"title":"üî£ Divide FWS","properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"1.1.2"},"widgets_values":[1],"color":"#5e549a","bgcolor":"#4a4086"},{"id":80,"type":"CLIPVisionLoader","pos":[-790,510],"size":[370,70],"flags":{},"order":41,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","links":[74]}],"properties":{"Node name for S&R":"CLIPVisionLoader","cnr_id":"comfy-core","ver":"0.3.59"},"widgets_values":["clip_vision_h.safetensors"]},{"id":81,"type":"WanVideoVAELoader","pos":[-790,310],"size":[370,90],"flags":{},"order":42,"mode":0,"inputs":[{"localized_name":"compile_args","name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":null},{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"precision","name":"precision","shape":7,"type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","slot_index":0,"links":[73]}],"properties":{"Node name for S&R":"WanVideoVAELoader","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788"},"widgets_values":["Wan2_1_VAE_bf16.safetensors","fp16"]},{"id":122,"type":"CLIPTextEncode","pos":[450,1940],"size":[410,120],"flags":{},"order":92,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":105},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[108]}],"properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.46"},"widgets_values":["ËøáÊõùÔºåÈùôÊÄÅÔºåÁªÜËäÇÊ®°Á≥ä‰∏çÊ∏ÖÔºåÂ≠óÂπïÔºåÈ£éÊ†ºÔºå‰ΩúÂìÅÔºåÁîª‰ΩúÔºåÁîªÈù¢ÔºåÈùôÊ≠¢ÔºåÊï¥‰ΩìÂèëÁÅ∞ÔºåÊúÄÂ∑ÆË¥®ÈáèÔºå‰ΩéË¥®ÈáèÔºåJPEGÂéãÁº©ÊÆãÁïôÔºå‰∏ëÈôãÁöÑÔºåÊÆãÁº∫ÁöÑÔºåÂ§ö‰ΩôÁöÑÊâãÊåáÔºåÁîªÂæó‰∏çÂ•ΩÁöÑÊâãÈÉ®ÔºåÁîªÂæó‰∏çÂ•ΩÁöÑËÑ∏ÈÉ®ÔºåÁï∏ÂΩ¢ÁöÑÔºåÊØÅÂÆπÁöÑÔºåÂΩ¢ÊÄÅÁï∏ÂΩ¢ÁöÑËÇ¢‰ΩìÔºåÊâãÊåáËûçÂêàÔºåÈùôÊ≠¢‰∏çÂä®ÁöÑÁîªÈù¢ÔºåÊùÇ‰π±ÁöÑËÉåÊôØÔºå‰∏âÊù°ËÖøÔºåËÉåÊôØ‰∫∫ÂæàÂ§öÔºåÂÄíÁùÄËµ∞, tattoo,"],"color":"#322","bgcolor":"#533"},{"id":125,"type":"WanVideoTextEmbedBridge","pos":[460,2120],"size":[222.00253295898438,46],"flags":{"collapsed":false},"order":109,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":107},{"localized_name":"negative","name":"negative","shape":7,"type":"CONDITIONING","link":108}],"outputs":[{"localized_name":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","links":[104]}],"properties":{"Node name for S&R":"WanVideoTextEmbedBridge","cnr_id":"comfyui-wanvideowrapper","ver":"1.2.5"},"widgets_values":[]},{"id":97,"type":"GetNode","pos":[-1483.4140625,1473.3389892578125],"size":[210,50],"flags":{"collapsed":true},"order":43,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[165]}],"title":"Get_img_face","properties":{},"widgets_values":["img_face"]},{"id":95,"type":"GetNode","pos":[-1470,1350],"size":[210,50],"flags":{"collapsed":true},"order":44,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[83]}],"title":"Get_img_ref","properties":{},"widgets_values":["img_ref"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":63,"type":"ImageResizeKJv2","pos":[870,650],"size":[440,360],"flags":{},"order":98,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":58},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":60},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"per_batch","name":"per_batch","shape":7,"type":"INT","widget":{"name":"per_batch"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[54,61]},{"localized_name":"width","name":"width","type":"INT","links":[]},{"localized_name":"height","name":"height","type":"INT","links":[]},{"localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"ImageResizeKJv2","cnr_id":"comfyui-kjnodes","ver":"e81f33508b0821ea2f53f4f46a833fa6215626bd"},"widgets_values":[512,10000,"lanczos","resize","0, 0, 0","center",16,"cpu",0]},{"id":117,"type":"Fast Groups Bypasser (rgthree)","pos":[0,1570],"size":[470,280],"flags":{},"order":45,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"showAllGraphs":true,"sort":"position","customSortAlphabet":"","toggleRestriction":"default"},"color":"#5e549a","bgcolor":"#4a4086"},{"id":58,"type":"PixelPerfectResolution","pos":[1940,80],"size":[231.71484375,106],"flags":{"collapsed":false},"order":79,"mode":0,"inputs":[{"localized_name":"original_image","name":"original_image","type":"IMAGE","link":65},{"localized_name":"image_gen_width","name":"image_gen_width","type":"INT","widget":{"name":"image_gen_width"},"link":63},{"localized_name":"image_gen_height","name":"image_gen_height","type":"INT","widget":{"name":"image_gen_height"},"link":62},{"localized_name":"resize_mode","name":"resize_mode","type":"COMBO","widget":{"name":"resize_mode"},"link":null}],"outputs":[{"localized_name":"RESOLUTION (INT)","name":"RESOLUTION (INT)","type":"INT","links":[52]}],"properties":{"Node name for S&R":"PixelPerfectResolution","cnr_id":"comfyui_controlnet_aux","ver":"cc6b232f4a47f0cdf70f4e1bfa24b74bd0d75bf1"},"widgets_values":[512,512,"Just Resize"]},{"id":140,"type":"GetNode","pos":[4680,60],"size":[210,34],"flags":{"collapsed":true},"order":46,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[114]}],"title":"Get_img_face","properties":{},"widgets_values":["img_face"]},{"id":92,"type":"GetImageSizeAndCount","pos":[-530,1580],"size":[277.20001220703125,86],"flags":{},"order":140,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":80}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","slot_index":0,"links":[94]},{"label":"720 width","localized_name":"width","name":"width","type":"INT","links":null},{"label":"400 height","localized_name":"height","name":"height","type":"INT","links":null},{"label":"97 count","localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"Node name for S&R":"GetImageSizeAndCount","cnr_id":"comfyui-kjnodes","ver":"36f6fdd7d4c393675ac622bd300ef667ee65d8b8"},"widgets_values":[]},{"id":88,"type":"WanVideoAnimateEmbeds","pos":[-1230,1360],"size":[290,370],"flags":{},"order":106,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","link":88},{"localized_name":"clip_embeds","name":"clip_embeds","shape":7,"type":"WANVIDIMAGE_CLIPEMBEDS","link":76},{"localized_name":"ref_images","name":"ref_images","shape":7,"type":"IMAGE","link":83},{"localized_name":"pose_images","name":"pose_images","shape":7,"type":"IMAGE","link":84},{"localized_name":"face_images","name":"face_images","shape":7,"type":"IMAGE","link":165},{"localized_name":"bg_images","name":"bg_images","shape":7,"type":"IMAGE","link":240},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":241},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":89},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":90},{"localized_name":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":91},{"localized_name":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"},"link":null},{"localized_name":"frame_window_size","name":"frame_window_size","type":"INT","widget":{"name":"frame_window_size"},"link":132},{"localized_name":"colormatch","name":"colormatch","type":"COMBO","widget":{"name":"colormatch"},"link":null},{"localized_name":"pose_strength","name":"pose_strength","type":"FLOAT","widget":{"name":"pose_strength"},"link":null},{"localized_name":"face_strength","name":"face_strength","type":"FLOAT","widget":{"name":"face_strength"},"link":null},{"localized_name":"tiled_vae","name":"tiled_vae","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_vae"},"link":null}],"outputs":[{"localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","links":[77]}],"properties":{"Node name for S&R":"WanVideoAnimateEmbeds","cnr_id":"ComfyUI-WanVideoWrapper","ver":"761b1d191e50d589465e31dc0d40ff7c59b1b7b0"},"widgets_values":[832,480,1,false,57,"disabled",1,1,false]},{"id":55,"type":"SetNode","pos":[1773.575439453125,590],"size":[210,50],"flags":{"collapsed":true},"order":122,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":49}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_img_pose","properties":{"previousName":"img_pose"},"widgets_values":["img_pose"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":185,"type":"MarkdownNote","pos":[-1230,1800],"size":[280,100],"flags":{"collapsed":false},"order":47,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Use the Scheduler that works best for you. LCM has been working fine for me.\n\nAlso force offload the models out of Memory if you want."],"color":"#432","bgcolor":"#653"},{"id":151,"type":"Label (rgthree)","pos":[2712.630615234375,-103.42105102539062],"size":[1599.36669921875,36],"flags":{"allow_interaction":true},"order":48,"mode":0,"inputs":[],"outputs":[],"title":"I'm not using Masks, BG Replacement, Face Tracking or Video Collage, but it is here if u need it ‚Üì ‚Üí","properties":{"fontSize":36,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":86,"type":"SetNode","pos":[-1457.4296875,991.1242065429688],"size":[210,58],"flags":{"collapsed":true},"order":119,"mode":0,"inputs":[{"name":"WANVIDEOMODEL","type":"WANVIDEOMODEL","link":112}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_model_wan","properties":{"previousName":"model_wan"},"widgets_values":["model_wan"],"color":"#223","bgcolor":"#335"},{"id":165,"type":"Label (rgthree)","pos":[-2130,250],"size":[238.06666564941406,36],"flags":{"allow_interaction":true},"order":49,"mode":0,"inputs":[],"outputs":[],"title":"Models Used ‚Üì","properties":{"fontSize":36,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0},"color":"#fff0","bgcolor":"#fff0"},{"id":119,"type":"CLIPLoader","pos":[-790,690],"size":[370,106],"flags":{},"order":50,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[103]}],"properties":{"Node name for S&R":"CLIPLoader","cnr_id":"comfy-core","ver":"0.3.34","models":[{"name":"umt5_xxl_fp16.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp16.safetensors","directory":"text_encoders"}]},"widgets_values":["umt5_xxl_fp8_e4m3fn_scaled.safetensors","wan","default"]},{"id":90,"type":"WanVideoSampler","pos":[-890,1340],"size":[320,870],"flags":{},"order":124,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"WANVIDEOMODEL","link":102},{"localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":77},{"localized_name":"text_embeds","name":"text_embeds","shape":7,"type":"WANVIDEOTEXTEMBEDS","link":109},{"localized_name":"samples","name":"samples","shape":7,"type":"LATENT","link":null},{"localized_name":"feta_args","name":"feta_args","shape":7,"type":"FETAARGS","link":null},{"localized_name":"context_options","name":"context_options","shape":7,"type":"WANVIDCONTEXT","link":null},{"localized_name":"cache_args","name":"cache_args","shape":7,"type":"CACHEARGS","link":null},{"localized_name":"flowedit_args","name":"flowedit_args","shape":7,"type":"FLOWEDITARGS","link":null},{"localized_name":"slg_args","name":"slg_args","shape":7,"type":"SLGARGS","link":null},{"localized_name":"loop_args","name":"loop_args","shape":7,"type":"LOOPARGS","link":null},{"localized_name":"experimental_args","name":"experimental_args","shape":7,"type":"EXPERIMENTALARGS","link":null},{"localized_name":"sigmas","name":"sigmas","shape":7,"type":"SIGMAS","link":null},{"localized_name":"unianimate_poses","name":"unianimate_poses","shape":7,"type":"UNIANIMATE_POSE","link":null},{"localized_name":"fantasytalking_embeds","name":"fantasytalking_embeds","shape":7,"type":"FANTASYTALKING_EMBEDS","link":null},{"localized_name":"uni3c_embeds","name":"uni3c_embeds","shape":7,"type":"UNI3C_EMBEDS","link":null},{"localized_name":"multitalk_embeds","name":"multitalk_embeds","shape":7,"type":"MULTITALK_EMBEDS","link":null},{"localized_name":"freeinit_args","name":"freeinit_args","shape":7,"type":"FREEINITARGS","link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"riflex_freq_index","name":"riflex_freq_index","type":"INT","widget":{"name":"riflex_freq_index"},"link":null},{"localized_name":"denoise_strength","name":"denoise_strength","shape":7,"type":"FLOAT","widget":{"name":"denoise_strength"},"link":null},{"localized_name":"batched_cfg","name":"batched_cfg","shape":7,"type":"BOOLEAN","widget":{"name":"batched_cfg"},"link":null},{"localized_name":"rope_function","name":"rope_function","shape":7,"type":"COMBO","widget":{"name":"rope_function"},"link":null},{"localized_name":"start_step","name":"start_step","shape":7,"type":"INT","widget":{"name":"start_step"},"link":null},{"localized_name":"end_step","name":"end_step","shape":7,"type":"INT","widget":{"name":"end_step"},"link":null},{"localized_name":"add_noise_to_samples","name":"add_noise_to_samples","shape":7,"type":"BOOLEAN","widget":{"name":"add_noise_to_samples"},"link":null}],"outputs":[{"localized_name":"samples","name":"samples","type":"LATENT","slot_index":0,"links":[79]},{"localized_name":"denoised_samples","name":"denoised_samples","type":"LATENT","links":null}],"properties":{"Node name for S&R":"WanVideoSampler","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788"},"widgets_values":[6,1,3,777,"fixed",false,"lcm",0,1,"","comfy",0,-1,false]},{"id":87,"type":"WanVideoClipVisionEncode","pos":[-1810,1380],"size":[260,262],"flags":{},"order":80,"mode":0,"inputs":[{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":81},{"localized_name":"image_1","name":"image_1","type":"IMAGE","link":82},{"localized_name":"image_2","name":"image_2","shape":7,"type":"IMAGE","link":null},{"localized_name":"negative_image","name":"negative_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"strength_1","name":"strength_1","type":"FLOAT","widget":{"name":"strength_1"},"link":null},{"localized_name":"strength_2","name":"strength_2","type":"FLOAT","widget":{"name":"strength_2"},"link":null},{"localized_name":"crop","name":"crop","type":"COMBO","widget":{"name":"crop"},"link":null},{"localized_name":"combine_embeds","name":"combine_embeds","type":"COMBO","widget":{"name":"combine_embeds"},"link":null},{"localized_name":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"},"link":null},{"localized_name":"tiles","name":"tiles","shape":7,"type":"INT","widget":{"name":"tiles"},"link":null},{"localized_name":"ratio","name":"ratio","shape":7,"type":"FLOAT","widget":{"name":"ratio"},"link":null}],"outputs":[{"localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_CLIPEMBEDS","links":[76]}],"properties":{"Node name for S&R":"WanVideoClipVisionEncode","cnr_id":"ComfyUI-WanVideoWrapper","ver":"2bdd81a10b03c14443c79bdf3b783b1feb3d1fa3"},"widgets_values":[1,1,"center","average",true,0,0.5]},{"id":101,"type":"GetNode","pos":[-1480,1590],"size":[210,50],"flags":{"collapsed":true},"order":51,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[89]}],"title":"Get_vid_width","properties":{},"widgets_values":["vid_width"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":102,"type":"GetNode","pos":[-1490,1630],"size":[210,50],"flags":{"collapsed":true},"order":52,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[90]}],"title":"Get_vid_height","properties":{},"widgets_values":["vid_height"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":32,"type":"INTConstant","pos":[10,1230],"size":[210,58],"flags":{"collapsed":false},"order":53,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"value","name":"value","type":"INT","links":[21]}],"title":"üîõ Resolution","properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"1.1.2"},"widgets_values":[720],"color":"#5e549a","bgcolor":"#4a4086"},{"id":154,"type":"SetNode","pos":[130,740],"size":[210,50],"flags":{"collapsed":true},"order":112,"mode":0,"inputs":[{"name":"INT","type":"INT","link":125}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_vid_frame_count","properties":{"previousName":"vid_frame_count"},"widgets_values":["vid_frame_count"],"color":"#1b4669","bgcolor":"#29699c"},{"id":105,"type":"GetNode","pos":[1064.8771776855426,1250.0350920898452],"size":[210,50],"flags":{"collapsed":true},"order":54,"mode":0,"inputs":[],"outputs":[{"name":"AUDIO","type":"AUDIO","links":[93]}],"title":"Get_vid_audio","properties":{},"widgets_values":["vid_audio"]},{"id":178,"type":"VHS_VideoCombine","pos":[2134.561405495384,1308.859648626154],"size":[530,631.3333333333333],"flags":{},"order":126,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":142},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":172},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":154},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null},{"name":"pix_fmt","type":["yuv420p","yuv420p10le"],"widget":{"name":"pix_fmt"},"link":null},{"name":"crf","type":"INT","widget":{"name":"crf"},"link":null},{"name":"save_metadata","type":"BOOLEAN","widget":{"name":"save_metadata"},"link":null},{"name":"trim_to_audio","type":"BOOLEAN","widget":{"name":"trim_to_audio"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine","cnr_id":"comfyui-videohelpersuite","ver":"8e4d79471bf1952154768e8435a9300077b534fa"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"Wanimate_Interpolated","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"Wanimate_Interpolated_00001.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":32,"workflow":"Wanimate_Interpolated_00001.png","fullpath":"D:\\Users\\Leon Jovanovic\\Documents\\Computer Science\\Machine Learning\\ComfyUI\\output\\Wanimate_Interpolated_00001.mp4"},"muted":true}}},{"id":50,"type":"SetNode","pos":[130,700],"size":[210,60],"flags":{"collapsed":true},"order":113,"mode":0,"inputs":[{"name":"AUDIO","type":"AUDIO","link":43}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_vid_audio","properties":{"previousName":"vid_audio"},"widgets_values":["vid_audio"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":123,"type":"GetNode","pos":[31.92983846768835,1902.017540383078],"size":[210,34],"flags":{"collapsed":true},"order":55,"mode":0,"inputs":[],"outputs":[{"name":"CLIP","type":"CLIP","links":[105,106]}],"title":"Get_WanTextEncoder","properties":{},"widgets_values":["WanTextEncoder"],"color":"#432","bgcolor":"#653"},{"id":120,"type":"SetNode","pos":[-790,850],"size":[210,34],"flags":{"collapsed":true},"order":90,"mode":0,"inputs":[{"name":"CLIP","type":"CLIP","link":103}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_WanTextEncoder","properties":{"previousName":"","widget_ue_connectable":{}},"widgets_values":["WanTextEncoder"],"color":"#432","bgcolor":"#653"},{"id":33,"type":"ImageResizeKJv2","pos":[150,160],"size":[320,360],"flags":{},"order":110,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":133},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":116},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"per_batch","name":"per_batch","shape":7,"type":"INT","widget":{"name":"per_batch"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[28,134]},{"localized_name":"width","name":"width","type":"INT","links":[26]},{"localized_name":"height","name":"height","type":"INT","links":[27]},{"localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"ImageResizeKJv2","cnr_id":"comfyui-kjnodes","ver":"e81f33508b0821ea2f53f4f46a833fa6215626bd"},"widgets_values":[10000,10000,"lanczos","resize","0, 0, 0","center",16,"cpu",0]},{"id":12,"type":"GetNode","pos":[-270,60],"size":[210,50],"flags":{"collapsed":true},"order":56,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[10]}],"title":"Get_frame_count","properties":{},"widgets_values":["frame_count"]},{"id":22,"type":"SetNode","pos":[110,2490],"size":[210,50],"flags":{"collapsed":true},"order":114,"mode":0,"inputs":[{"name":"INT","type":"INT","link":19}],"outputs":[{"name":"INT","type":"INT","links":[121,123]}],"title":"Set_frame_count","properties":{"previousName":"frame_count"},"widgets_values":["frame_count"],"color":"#1b4669","bgcolor":"#29699c"},{"id":23,"type":"GetNode","pos":[-60,2410],"size":[210,34],"flags":{"collapsed":true},"order":57,"mode":0,"inputs":[],"outputs":[{"name":"FLOAT","type":"FLOAT","links":[17]}],"title":"Get_length","properties":{},"widgets_values":["length"]},{"id":24,"type":"GetNode","pos":[-60,2490],"size":[210,34],"flags":{"collapsed":true},"order":58,"mode":0,"inputs":[],"outputs":[{"name":"FLOAT","type":"FLOAT","links":[18]}],"title":"Get_fps_new","properties":{},"widgets_values":["fps_new"]},{"id":28,"type":"FloatConstant","pos":[260,1230],"size":[210,58],"flags":{},"order":96,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"FLOAT","widget":{"name":"value"},"link":191}],"outputs":[{"localized_name":"value","name":"value","type":"FLOAT","links":[20]}],"title":"üî¢ Length (Seconds)","properties":{"Node name for S&R":"FloatConstant","cnr_id":"comfyui-kjnodes","ver":"1.1.2"},"widgets_values":[6.83],"color":"#5e549a","bgcolor":"#4a4086"},{"id":214,"type":"GetNode","pos":[248.298249919974,1187.7461651304125],"size":[210,60],"flags":{"collapsed":true},"order":59,"mode":0,"inputs":[],"outputs":[{"name":"FLOAT","type":"FLOAT","links":[191]}],"title":"Get_video_length","properties":{},"widgets_values":["video_length"],"color":"#232","bgcolor":"#353"},{"id":228,"type":"VHS_VideoInfoSource","pos":[-62.45227770031699,947.4567850885488],"size":[239.63333129882812,106],"flags":{"collapsed":false},"order":97,"mode":0,"inputs":[{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","link":188}],"outputs":[{"localized_name":"fpsüü®","name":"fpsüü®","type":"FLOAT","links":null},{"localized_name":"frame_countüü®","name":"frame_countüü®","type":"INT","links":null},{"localized_name":"durationüü®","name":"durationüü®","type":"FLOAT","links":[192]},{"localized_name":"widthüü®","name":"widthüü®","type":"INT","links":null},{"localized_name":"heightüü®","name":"heightüü®","type":"INT","links":null}],"properties":{"Node name for S&R":"VHS_VideoInfoSource"},"widgets_values":{}},{"id":213,"type":"SetNode","pos":[282.1850615808617,1022.5518071990272],"size":[210,60],"flags":{"collapsed":true},"order":116,"mode":0,"inputs":[{"name":"FLOAT","type":"FLOAT","link":192}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_video_length","properties":{"previousName":"video_length"},"widgets_values":["video_length"],"color":"#232","bgcolor":"#353"},{"id":222,"type":"VHS_LoadVideo","pos":[-313.57801285466525,975.4741911490001],"size":[340,94],"flags":{"collapsed":true},"order":60,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":[]},{"localized_name":"audio","name":"audio","type":"AUDIO","links":[]},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":[188]}],"properties":{"Node name for S&R":"VHS_LoadVideo","cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","widget_ue_connectable":{"video":true,"force_rate":true,"custom_width":true,"custom_height":true,"frame_load_cap":true,"skip_first_frames":true,"select_every_nth":true,"format":true}},"widgets_values":{"video":"video.mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":65,"skip_first_frames":0,"select_every_nth":1,"format":"Wan","choose video to upload":"image","videopreview":{"hidden":false,"paused":true,"params":{"filename":"video.mp4","type":"input","format":"video/mp4","force_rate":0,"custom_width":0,"custom_height":480,"frame_load_cap":65,"skip_first_frames":0,"select_every_nth":1},"muted":true}},"color":"#5e549a","bgcolor":"#4a4086"},{"id":210,"type":"GetNode","pos":[1732.302813360853,1265.6142826149335],"size":[210,34],"flags":{"collapsed":true},"order":61,"mode":0,"inputs":[],"outputs":[{"name":"AUDIO","type":"AUDIO","links":[172]}],"title":"Get_vid_audio","properties":{},"widgets_values":["vid_audio"]},{"id":83,"type":"MarkdownNote","pos":[-2433.4768798727214,352.4401968055929],"size":[530,320],"flags":{},"order":62,"mode":0,"inputs":[],"outputs":[],"title":"Models used","properties":{},"widgets_values":["Model links (e4m3fn for 40 series and up  |||  e5m2 for 30 series and down):\n\n[https://huggingface.co/Kijai/WanVideo_comfy_fp8_scaled/tree/main/Wan22Animate](https://huggingface.co/Kijai/WanVideo_comfy_fp8_scaled/tree/main/Wan22Animate)\n\nLoRA:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/tree/main/Lightx2v](https://huggingface.co/Kijai/WanVideo_comfy/tree/main/Lightx2v)\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/WanAnimate_relight_lora_fp16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/WanAnimate_relight_lora_fp16.safetensors)\n\n\nFP8 Text encoder (This one uses only 6GB of RAM and don't impact the output quality, which allows me to keep the Text Encoder on RAM and change the prompt between tests without having to unload/load them every time. But if you prefer the FP16 version just copy it from the original Kijai WF):\n\n[https://huggingface.co/chatpig/encoder/blob/main/umt5_xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/chatpig/encoder/blob/main/umt5_xxl_fp8_e4m3fn_scaled.safetensors)\n\nVAE:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_VAE_bf16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_VAE_bf16.safetensors)\n\n\nShrek as a bonus:\n\n[https://imgur.com/ECGDJv7](https://imgur.com/ECGDJv7)"],"color":"#432","bgcolor":"#653"},{"id":106,"type":"VHS_VideoCombine","pos":[1111.770344409785,1338.3572734839101],"size":[530,631.3333333333333],"flags":{},"order":104,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":101},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":93},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":166},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null},{"name":"pix_fmt","type":["yuv420p","yuv420p10le"],"widget":{"name":"pix_fmt"},"link":null},{"name":"crf","type":"INT","widget":{"name":"crf"},"link":null},{"name":"save_metadata","type":"BOOLEAN","widget":{"name":"save_metadata"},"link":null},{"name":"trim_to_audio","type":"BOOLEAN","widget":{"name":"trim_to_audio"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine","cnr_id":"comfyui-videohelpersuite","ver":"8e4d79471bf1952154768e8435a9300077b534fa"},"widgets_values":{"frame_rate":30,"loop_count":0,"filename_prefix":"Wanimate","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"Wanimate_00001-audio.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"Wanimate_00001.png","fullpath":"D:\\Users\\Leon Jovanovic\\Documents\\Computer Science\\Machine Learning\\ComfyUI\\output\\Wanimate_00001-audio.mp4"},"muted":true}}},{"id":76,"type":"WanVideoLoraSelectMulti","pos":[-1441.0234375,149.30262756347656],"size":[600,342],"flags":{},"order":63,"mode":0,"inputs":[{"localized_name":"prev_lora","name":"prev_lora","shape":7,"type":"WANVIDLORA","link":null},{"localized_name":"blocks","name":"blocks","shape":7,"type":"SELECTEDBLOCKS","link":null},{"localized_name":"lora_0","name":"lora_0","type":"COMBO","widget":{"name":"lora_0"},"link":null},{"localized_name":"strength_0","name":"strength_0","type":"FLOAT","widget":{"name":"strength_0"},"link":null},{"localized_name":"lora_1","name":"lora_1","type":"COMBO","widget":{"name":"lora_1"},"link":null},{"localized_name":"strength_1","name":"strength_1","type":"FLOAT","widget":{"name":"strength_1"},"link":null},{"localized_name":"lora_2","name":"lora_2","type":"COMBO","widget":{"name":"lora_2"},"link":null},{"localized_name":"strength_2","name":"strength_2","type":"FLOAT","widget":{"name":"strength_2"},"link":null},{"localized_name":"lora_3","name":"lora_3","type":"COMBO","widget":{"name":"lora_3"},"link":null},{"localized_name":"strength_3","name":"strength_3","type":"FLOAT","widget":{"name":"strength_3"},"link":null},{"localized_name":"lora_4","name":"lora_4","type":"COMBO","widget":{"name":"lora_4"},"link":null},{"localized_name":"strength_4","name":"strength_4","type":"FLOAT","widget":{"name":"strength_4"},"link":null},{"localized_name":"low_mem_load","name":"low_mem_load","shape":7,"type":"BOOLEAN","widget":{"name":"low_mem_load"},"link":null},{"localized_name":"merge_loras","name":"merge_loras","shape":7,"type":"BOOLEAN","widget":{"name":"merge_loras"},"link":null}],"outputs":[{"localized_name":"lora","name":"lora","type":"WANVIDLORA","links":[110]}],"properties":{"Node name for S&R":"WanVideoLoraSelectMulti","cnr_id":"ComfyUI-WanVideoWrapper","ver":"b2c8cf969fcf60a38884ea2c29af177ae1f28b29"},"widgets_values":["WanAnimate_relight_lora_fp16.safetensors",1,"lightx2v_I2V_14B_480p_cfg_step_distill_rank64_bf16.safetensors",1.2,"none",1,"none",1,"none",1,false,false]},{"id":13,"type":"VHS_LoadVideo","pos":[-270,160],"size":[340,504],"flags":{"collapsed":false},"order":94,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":9},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":10},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[133]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":[16,125]},{"localized_name":"audio","name":"audio","type":"AUDIO","links":[43]},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":[]}],"properties":{"Node name for S&R":"VHS_LoadVideo","cnr_id":"comfyui-videohelpersuite","ver":"c9dcc3a229437df232d61da4f9697c87c1f22428","widget_ue_connectable":{"video":true,"force_rate":true,"custom_width":true,"custom_height":true,"frame_load_cap":true,"skip_first_frames":true,"select_every_nth":true,"format":true}},"widgets_values":{"video":"video.mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":65,"skip_first_frames":0,"select_every_nth":1,"format":"Wan","choose video to upload":"image","videopreview":{"hidden":false,"paused":true,"params":{"filename":"video.mp4","type":"input","format":"video/mp4","force_rate":0,"custom_width":0,"custom_height":480,"frame_load_cap":65,"skip_first_frames":0,"select_every_nth":1},"muted":true}},"color":"#5e549a","bgcolor":"#4a4086"},{"id":64,"type":"LoadImage","pos":[870,70],"size":[420,470],"flags":{},"order":64,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[58]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"Node name for S&R":"LoadImage","cnr_id":"comfy-core","ver":"0.3.59"},"widgets_values":["image.jpeg","image"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":20,"type":"easy showAnything","pos":[121.7210490258779,787.9227974023412],"size":[210,90],"flags":{"collapsed":false},"order":111,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","shape":7,"type":"*","link":16}],"outputs":[{"localized_name":"output","name":"output","type":"*","links":null}],"title":"Check frame count","properties":{"Node name for S&R":"easy showAnything","cnr_id":"comfyui-easy-use","ver":"1.3.1"},"widgets_values":["109"]},{"id":141,"type":"VHS_VideoCombine","pos":[4670,110],"size":[240,334],"flags":{"collapsed":false},"order":89,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":114},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null},{"name":"pix_fmt","type":["yuv420p","yuv420p10le"],"widget":{"name":"pix_fmt"},"link":null},{"name":"crf","type":"INT","widget":{"name":"crf"},"link":null},{"name":"save_metadata","type":"BOOLEAN","widget":{"name":"save_metadata"},"link":null},{"name":"trim_to_audio","type":"BOOLEAN","widget":{"name":"trim_to_audio"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine","cnr_id":"comfyui-videohelpersuite","ver":"8e4d79471bf1952154768e8435a9300077b534fa"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"WanVideo2_1_T2V","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":false,"trim_to_audio":false,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"WanVideo2_1_T2V_00002.mp4","subfolder":"","type":"temp","format":"video/h264-mp4","frame_rate":16,"workflow":"WanVideo2_1_T2V_00002.png","fullpath":"D:\\Users\\Leon Jovanovic\\Documents\\Computer Science\\Machine Learning\\ComfyUI\\temp\\WanVideo2_1_T2V_00002.mp4"},"muted":true}}},{"id":36,"type":"DownloadAndLoadSAM2Model","pos":[3392.9447962988575,120.73650612670947],"size":[290,130],"flags":{},"order":65,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"segmentor","name":"segmentor","type":"COMBO","widget":{"name":"segmentor"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","links":[31]}],"properties":{"Node name for S&R":"DownloadAndLoadSAM2Model","cnr_id":"ComfyUI-segment-anything-2","ver":"c59676b008a76237002926f684d0ca3a9b29ac54"},"widgets_values":["sam2_hiera_base_plus.safetensors","video","cuda","fp16"]},{"id":10,"type":"PreviewImage","pos":[540,250],"size":[210,300],"flags":{"collapsed":false},"order":137,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":8}],"outputs":[],"title":"Check Video Crop/Size","properties":{"Node name for S&R":"PreviewImage","cnr_id":"comfy-core","ver":"0.3.38","widget_ue_connectable":{}},"widgets_values":[]},{"id":15,"type":"PreviewImage","pos":[1350,80],"size":[290,340],"flags":{"collapsed":false},"order":118,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":61}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage","cnr_id":"comfy-core","ver":"0.3.46"},"widgets_values":[]},{"id":47,"type":"SetNode","pos":[3425.2157277624924,1039.3787774096677],"size":[210,50],"flags":{"collapsed":true},"order":146,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":41}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_img_bg","properties":{"previousName":"img_bg"},"widgets_values":["img_bg"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":75,"type":"WanVideoModelLoader","pos":[-1466.8896484375,625.9170532226562],"size":[600,318],"flags":{},"order":99,"mode":0,"inputs":[{"localized_name":"compile_args","name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":68},{"localized_name":"block_swap_args","name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS","link":208},{"localized_name":"lora","name":"lora","shape":7,"type":"WANVIDLORA","link":110},{"localized_name":"vram_management_args","name":"vram_management_args","shape":7,"type":"VRAM_MANAGEMENTARGS","link":null},{"localized_name":"extra_model","name":"extra_model","shape":7,"type":"VACEPATH","link":null},{"localized_name":"fantasytalking_model","name":"fantasytalking_model","shape":7,"type":"FANTASYTALKINGMODEL","link":null},{"localized_name":"multitalk_model","name":"multitalk_model","shape":7,"type":"MULTITALKMODEL","link":null},{"localized_name":"fantasyportrait_model","name":"fantasyportrait_model","shape":7,"type":"FANTASYPORTRAITMODEL","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"base_precision","name":"base_precision","type":"COMBO","widget":{"name":"base_precision"},"link":null},{"localized_name":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"},"link":null},{"localized_name":"load_device","name":"load_device","type":"COMBO","widget":{"name":"load_device"},"link":null},{"localized_name":"attention_mode","name":"attention_mode","shape":7,"type":"COMBO","widget":{"name":"attention_mode"},"link":null},{"localized_name":"rms_norm_function","name":"rms_norm_function","shape":7,"type":"COMBO","widget":{"name":"rms_norm_function"},"link":null}],"outputs":[{"localized_name":"model","name":"model","type":"WANVIDEOMODEL","slot_index":0,"links":[112]}],"properties":{"Node name for S&R":"WanVideoModelLoader","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788"},"widgets_values":["Wan2_2-Animate-14B_fp8_scaled_e5m2_KJ_v2.safetensors","fp16_fast","disabled","offload_device","sageattn","default"]},{"id":155,"type":"SetNode","pos":[2000,590],"size":[210,50],"flags":{"collapsed":true},"order":123,"mode":0,"inputs":[{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","link":126}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_pose_keypoint","properties":{"previousName":"pose_keypoint"},"widgets_values":["pose_keypoint"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":53,"type":"DWPreprocessor","pos":[1760,320],"size":[420,222],"flags":{},"order":105,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":66},{"localized_name":"detect_hand","name":"detect_hand","shape":7,"type":"COMBO","widget":{"name":"detect_hand"},"link":null},{"localized_name":"detect_body","name":"detect_body","shape":7,"type":"COMBO","widget":{"name":"detect_body"},"link":null},{"localized_name":"detect_face","name":"detect_face","shape":7,"type":"COMBO","widget":{"name":"detect_face"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":52},{"localized_name":"bbox_detector","name":"bbox_detector","shape":7,"type":"COMBO","widget":{"name":"bbox_detector"},"link":null},{"localized_name":"pose_estimator","name":"pose_estimator","shape":7,"type":"COMBO","widget":{"name":"pose_estimator"},"link":null},{"localized_name":"scale_stick_for_xinsr_cn","name":"scale_stick_for_xinsr_cn","shape":7,"type":"COMBO","widget":{"name":"scale_stick_for_xinsr_cn"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[49]},{"localized_name":"POSE_KEYPOINT","name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":[126]}],"properties":{"Node name for S&R":"DWPreprocessor","cnr_id":"comfyui_controlnet_aux","ver":"1d7cdce8cb771fbc39a432a6338168c12a338ef4"},"widgets_values":["enable","enable","enable",960,"yolox_l.torchscript.pt","dw-ll_ucoco_384_bs5.torchscript.pt","disable"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":37,"type":"Sam2Segmentation","pos":[3397.6562220801075,334.139475487061],"size":[290,182],"flags":{},"order":120,"mode":0,"inputs":[{"localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","link":31},{"localized_name":"image","name":"image","type":"IMAGE","link":53},{"localized_name":"coordinates_positive","name":"coordinates_positive","shape":7,"type":"STRING","link":234},{"localized_name":"coordinates_negative","name":"coordinates_negative","shape":7,"type":"STRING","link":null},{"localized_name":"bboxes","name":"bboxes","shape":7,"type":"BBOX","link":null},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"individual_objects","name":"individual_objects","shape":7,"type":"BOOLEAN","widget":{"name":"individual_objects"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":[32]}],"properties":{"Node name for S&R":"Sam2Segmentation","cnr_id":"ComfyUI-segment-anything-2","ver":"c59676b008a76237002926f684d0ca3a9b29ac54"},"widgets_values":[false,false]},{"id":43,"type":"DrawMaskOnImage","pos":[3397.6562220801075,894.139475487061],"size":[320,102],"flags":{},"order":144,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":40},{"localized_name":"mask","name":"mask","type":"MASK","link":231},{"localized_name":"color","name":"color","type":"STRING","widget":{"name":"color"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[39,41]}],"properties":{"Node name for S&R":"DrawMaskOnImage","cnr_id":"comfyui-kjnodes","ver":"623b5913dc7f240fd8b26422e99f8849a21c5473"},"widgets_values":["0, 0, 0","cpu"]},{"id":38,"type":"GrowMask","pos":[3390.4042689551075,571.0315042956547],"size":[300,90],"flags":{"collapsed":false},"order":134,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":32},{"localized_name":"expand","name":"expand","type":"INT","widget":{"name":"expand"},"link":null},{"localized_name":"tapered_corners","name":"tapered_corners","type":"BOOLEAN","widget":{"name":"tapered_corners"},"link":null}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","links":[33]}],"properties":{"Node name for S&R":"GrowMask","cnr_id":"comfy-core","ver":"0.3.59"},"widgets_values":[10,true]},{"id":42,"type":"SetNode","pos":[3395.5844447363575,836.571360252686],"size":[210,50.00000762939453],"flags":{"collapsed":true},"order":142,"mode":0,"inputs":[{"name":"MASK","type":"MASK","link":38}],"outputs":[{"name":"MASK","type":"MASK","links":[231]}],"title":"Set_vid_mask","properties":{"previousName":"vid_mask"},"widgets_values":["vid_mask"],"color":"#1c5715","bgcolor":"#1f401b"},{"id":52,"type":"VHS_VideoCombine","pos":[2255.697509765625,150.26087951660156],"size":[370,334],"flags":{"collapsed":false},"order":81,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":64},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null},{"name":"pix_fmt","type":["yuv420p","yuv420p10le"],"widget":{"name":"pix_fmt"},"link":null},{"name":"crf","type":"INT","widget":{"name":"crf"},"link":null},{"name":"save_metadata","type":"BOOLEAN","widget":{"name":"save_metadata"},"link":null},{"name":"trim_to_audio","type":"BOOLEAN","widget":{"name":"trim_to_audio"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine","cnr_id":"comfyui-videohelpersuite","ver":"8e4d79471bf1952154768e8435a9300077b534fa"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"WanVideo2_1_T2V","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"WanVideo2_1_T2V_00001.mp4","subfolder":"","type":"temp","format":"video/h264-mp4","frame_rate":16,"workflow":"WanVideo2_1_T2V_00001.png","fullpath":"D:\\Users\\Leon Jovanovic\\Documents\\Computer Science\\Machine Learning\\ComfyUI\\temp\\WanVideo2_1_T2V_00001.mp4"},"muted":true}}},{"id":44,"type":"VHS_VideoCombine","pos":[3759.733424677763,109.99999999999994],"size":[480,603.5555555555555],"flags":{},"order":145,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":39},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null},{"name":"pix_fmt","type":["yuv420p","yuv420p10le"],"widget":{"name":"pix_fmt"},"link":null},{"name":"crf","type":"INT","widget":{"name":"crf"},"link":null},{"name":"save_metadata","type":"BOOLEAN","widget":{"name":"save_metadata"},"link":null},{"name":"trim_to_audio","type":"BOOLEAN","widget":{"name":"trim_to_audio"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"Node name for S&R":"VHS_VideoCombine","cnr_id":"comfyui-videohelpersuite","ver":"8e4d79471bf1952154768e8435a9300077b534fa"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"WanVideo2_1_T2V","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":true,"params":{"filename":"WanVideo2_1_T2V_00007.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"WanVideo2_1_T2V_00007.png","fullpath":"D:\\Users\\Leon Jovanovic\\Documents\\Computer Science\\Machine Learning\\ComfyUI\\output\\WanVideo2_1_T2V_00007.mp4"},"muted":true}}},{"id":238,"type":"WanVideoBlockSwap","pos":[-1830,620],"size":[281.33333587646484,202],"flags":{},"order":66,"mode":0,"inputs":[{"localized_name":"blocks_to_swap","name":"blocks_to_swap","type":"INT","widget":{"name":"blocks_to_swap"},"link":null},{"localized_name":"offload_img_emb","name":"offload_img_emb","type":"BOOLEAN","widget":{"name":"offload_img_emb"},"link":null},{"localized_name":"offload_txt_emb","name":"offload_txt_emb","type":"BOOLEAN","widget":{"name":"offload_txt_emb"},"link":null},{"localized_name":"use_non_blocking","name":"use_non_blocking","shape":7,"type":"BOOLEAN","widget":{"name":"use_non_blocking"},"link":null},{"localized_name":"vace_blocks_to_swap","name":"vace_blocks_to_swap","shape":7,"type":"INT","widget":{"name":"vace_blocks_to_swap"},"link":null},{"localized_name":"prefetch_blocks","name":"prefetch_blocks","shape":7,"type":"INT","widget":{"name":"prefetch_blocks"},"link":null},{"localized_name":"block_swap_debug","name":"block_swap_debug","shape":7,"type":"BOOLEAN","widget":{"name":"block_swap_debug"},"link":null}],"outputs":[{"localized_name":"block_swap_args","name":"block_swap_args","type":"BLOCKSWAPARGS","links":[208]}],"properties":{"Node name for S&R":"WanVideoBlockSwap"},"widgets_values":[40,false,false,false,0,0,false]},{"id":255,"type":"PoseToSAMPoints","pos":[3010.696640483229,477.4079737838242],"size":[270,154],"flags":{},"order":100,"mode":0,"inputs":[{"localized_name":"pose","name":"pose","type":"POSE_KEYPOINT","link":233},{"localized_name":"person_index","name":"person_index","shape":7,"type":"INT","widget":{"name":"person_index"},"link":235},{"localized_name":"top_k_pose","name":"top_k_pose","shape":7,"type":"INT","widget":{"name":"top_k_pose"},"link":null},{"localized_name":"top_k_face","name":"top_k_face","shape":7,"type":"INT","widget":{"name":"top_k_face"},"link":null},{"localized_name":"top_k_left_hand","name":"top_k_left_hand","shape":7,"type":"INT","widget":{"name":"top_k_left_hand"},"link":null},{"localized_name":"top_k_right_hand","name":"top_k_right_hand","shape":7,"type":"INT","widget":{"name":"top_k_right_hand"},"link":null}],"outputs":[{"localized_name":"p","name":"p","type":"STRING","links":[234]}],"properties":{"Node name for S&R":"PoseToSAMPoints"},"widgets_values":[0,5,1,1,1]},{"id":256,"type":"GetNode","pos":[2760.0827594044567,478.23586888123583],"size":[210,50],"flags":{"collapsed":true},"order":67,"mode":0,"inputs":[],"outputs":[{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":[233]}],"title":"Get_pose_keypoint","properties":{},"widgets_values":["pose_keypoint"]},{"id":59,"type":"GetNode","pos":[3034.5974913696396,196.73992272340726],"size":[210,58],"flags":{"collapsed":false},"order":68,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[53]}],"title":"Get_vid_resized","properties":{},"widgets_values":["vid_resized"]},{"id":39,"type":"BlockifyMask","pos":[3393.5131556738575,705.4915873034672],"size":[310,82],"flags":{},"order":139,"mode":0,"inputs":[{"localized_name":"masks","name":"masks","type":"MASK","link":33},{"localized_name":"block_size","name":"block_size","type":"INT","widget":{"name":"block_size"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":[38]}],"properties":{"Node name for S&R":"BlockifyMask","cnr_id":"comfyui-kjnodes","ver":"00da1910634fbf314d407608efb281ae6f7f1ba2"},"widgets_values":[32,"cpu"]},{"id":57,"type":"SetNode","pos":[4403.704973864745,673.2848846069519],"size":[210,50],"flags":{"collapsed":true},"order":135,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":51}],"outputs":[{"name":"*","type":"*","links":[]}],"title":"Set_img_face","properties":{"previousName":"img_face"},"widgets_values":["img_face"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":56,"type":"ImageCropByMaskAndResize","pos":[4383.833343713376,454.32463297121063],"size":[250,170],"flags":{},"order":121,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":145},{"localized_name":"mask","name":"mask","type":"MASK","link":239},{"localized_name":"base_resolution","name":"base_resolution","type":"INT","widget":{"name":"base_resolution"},"link":null},{"localized_name":"padding","name":"padding","type":"INT","widget":{"name":"padding"},"link":null},{"localized_name":"min_crop_resolution","name":"min_crop_resolution","type":"INT","widget":{"name":"min_crop_resolution"},"link":null},{"localized_name":"max_crop_resolution","name":"max_crop_resolution","type":"INT","widget":{"name":"max_crop_resolution"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[51]},{"localized_name":"masks","name":"masks","type":"MASK","links":null},{"localized_name":"bbox","name":"bbox","type":"BBOX","links":null}],"properties":{"Node name for S&R":"ImageCropByMaskAndResize","cnr_id":"comfyui-kjnodes","ver":"c2712d778158eb63bbad2344f61b8d448645431d"},"widgets_values":[512,0,128,512],"color":"#5e549a","bgcolor":"#4a4086"},{"id":257,"type":"GetNode","pos":[2768.0857453461113,531.2086112505042],"size":[210,60],"flags":{"collapsed":true},"order":69,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[235]}],"title":"Get_person_index","properties":{},"widgets_values":["person_index"],"color":"#1b4669","bgcolor":"#29699c"},{"id":260,"type":"FaceMaskFromPoseKeypoints","pos":[4334.446030929798,285.2435787797693],"size":[306.0333312988281,58],"flags":{},"order":101,"mode":0,"inputs":[{"localized_name":"pose_kps","name":"pose_kps","type":"POSE_KEYPOINT","link":237},{"localized_name":"person_index","name":"person_index","type":"INT","widget":{"name":"person_index"},"link":238}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","links":[239]}],"properties":{"Node name for S&R":"FaceMaskFromPoseKeypoints"},"widgets_values":[0]},{"id":262,"type":"GetNode","pos":[4399.674129513777,198.69090950485668],"size":[210,50],"flags":{"collapsed":true},"order":70,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[238]}],"title":"Get_person_index","properties":{},"widgets_values":["person_index"],"color":"#1b4669","bgcolor":"#29699c"},{"id":261,"type":"GetNode","pos":[4395.910969980077,152.27860858932365],"size":[210,50],"flags":{"collapsed":true},"order":71,"mode":0,"inputs":[],"outputs":[{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":[237]}],"title":"Get_pose_keypoint","properties":{},"widgets_values":["pose_keypoint"]},{"id":184,"type":"GetNode","pos":[4338.932512927236,392.6579651245298],"size":[210,50],"flags":{"collapsed":true},"order":72,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[145]}],"title":"Get_vid_resized","properties":{},"widgets_values":["vid_resized"]},{"id":96,"type":"GetNode","pos":[-1492.8100173117855,1438.0585094216094],"size":[210,50],"flags":{"collapsed":true},"order":73,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[84,169]}],"title":"Get_img_pose","properties":{},"widgets_values":["img_pose"],"color":"#5e549a","bgcolor":"#4a4086"},{"id":208,"type":"PreviewImage","pos":[-1583.8853759765625,1920.4097900390625],"size":[140,246],"flags":{},"order":102,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":169}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage","cnr_id":"comfy-core","ver":"0.3.64"},"widgets_values":[]},{"id":98,"type":"GetNode","pos":[-1470,1510],"size":[210,50],"flags":{"collapsed":true},"order":74,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[240]}],"title":"Get_img_bg","properties":{},"widgets_values":["img_bg"]},{"id":99,"type":"GetNode","pos":[-1480,1550],"size":[210,50],"flags":{"collapsed":true},"order":75,"mode":0,"inputs":[],"outputs":[{"name":"MASK","type":"MASK","links":[241]}],"title":"Get_vid_mask","properties":{},"widgets_values":["vid_mask"],"color":"#1c5715","bgcolor":"#1f401b"},{"id":25,"type":"SetNode","pos":[260,1330],"size":[210,34],"flags":{"collapsed":true},"order":115,"mode":0,"inputs":[{"name":"FLOAT","type":"FLOAT","link":20}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_length","properties":{"previousName":""},"widgets_values":["length"],"color":"#232","bgcolor":"#353"},{"id":31,"type":"SetNode","pos":[765.6097879847147,1318.862082749814],"size":[210,34],"flags":{"collapsed":true},"order":103,"mode":0,"inputs":[{"name":"FLOAT","type":"FLOAT","link":23}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_fps_new","properties":{"previousName":""},"widgets_values":["fps_new"],"color":"#232","bgcolor":"#353"},{"id":30,"type":"PrimitiveFloat","pos":[755.6097879847147,1218.862082749814],"size":[210,58],"flags":{"collapsed":false},"order":76,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"FLOAT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[23,166]}],"title":"üé¶ Framerate","properties":{"Node name for S&R":"PrimitiveFloat","cnr_id":"comfy-core","ver":"0.3.46"},"widgets_values":[16],"color":"#5e549a","bgcolor":"#4a4086"},{"id":263,"type":"INTConstant","pos":[517.1703935639282,1205.1254076337307],"size":[200,58],"flags":{},"order":78,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"value","name":"value","type":"INT","links":[242]}],"title":"Person Index","properties":{"Node name for S&R":"INTConstant"},"widgets_values":[0],"color":"#1b4669","bgcolor":"#29699c"},{"id":259,"type":"SetNode","pos":[544.6798710404967,1315.6967605264238],"size":[210,60],"flags":{"collapsed":true},"order":77,"mode":0,"inputs":[{"name":"INT","type":"INT","link":242}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_person_index","properties":{"previousName":"person_index"},"widgets_values":["person_index"],"color":"#1b4669","bgcolor":"#29699c"},{"id":124,"type":"CLIPTextEncode","pos":[0,1960],"size":[420,210],"flags":{"collapsed":false},"order":93,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":106},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[107]}],"properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.46"},"widgets_values":[""],"color":"#232","bgcolor":"#353"}],"links":[[8,9,0,10,0,"IMAGE"],[9,11,0,13,3,"FLOAT"],[10,12,0,13,6,"INT"],[16,13,1,20,0,"*"],[17,23,0,21,0,"INT,FLOAT,IMAGE,LATENT"],[18,24,0,21,1,"INT,FLOAT,IMAGE,LATENT"],[19,21,0,22,0,"*"],[20,28,0,25,0,"*"],[21,32,0,26,0,"*"],[22,29,0,27,0,"*"],[23,30,0,31,0,"*"],[26,33,1,2,0,"INT"],[27,33,2,3,0,"INT"],[28,33,0,4,0,"IMAGE"],[31,36,0,37,0,"SAM2MODEL"],[32,37,0,38,0,"MASK"],[33,38,0,39,0,"MASK"],[38,39,0,42,0,"MASK"],[39,43,0,44,0,"IMAGE"],[40,46,0,43,0,"IMAGE"],[41,43,0,47,0,"*"],[43,13,2,50,0,"*"],[49,53,0,55,0,"*"],[51,56,0,57,0,"*"],[52,58,0,53,4,"INT"],[53,59,0,37,1,"IMAGE"],[54,63,0,16,0,"IMAGE"],[58,64,0,63,0,"IMAGE"],[60,67,0,63,2,"INT"],[61,63,0,15,0,"IMAGE"],[62,68,0,58,2,"INT"],[63,69,0,58,1,"INT"],[64,70,0,52,0,"IMAGE"],[65,72,0,58,0,"IMAGE"],[66,73,0,53,0,"IMAGE"],[68,82,0,75,0,"WANCOMPILEARGS"],[73,81,0,84,0,"*"],[74,80,0,85,0,"*"],[76,87,0,88,1,"WANVIDIMAGE_CLIPEMBEDS"],[77,88,0,90,1,"WANVIDIMAGE_EMBEDS"],[79,90,0,91,1,"LATENT"],[80,91,0,92,0,"IMAGE"],[81,93,0,87,0,"CLIP_VISION"],[82,94,0,87,1,"IMAGE"],[83,95,0,88,2,"IMAGE"],[84,96,0,88,3,"IMAGE"],[88,100,0,88,0,"WANVAE"],[89,101,0,88,7,"INT"],[90,102,0,88,8,"INT"],[91,103,0,88,9,"INT"],[92,104,0,91,0,"WANVAE"],[93,105,0,106,1,"AUDIO"],[94,92,0,107,0,"*"],[95,113,0,108,1,"IMAGE"],[96,111,0,113,0,"IMAGE"],[98,110,0,113,5,"IMAGE"],[99,112,0,113,6,"IMAGE"],[100,115,0,108,0,"IMAGE"],[101,116,0,106,0,"IMAGE"],[102,118,0,90,0,"WANVIDEOMODEL"],[103,119,0,120,0,"*"],[104,125,0,121,0,"*"],[105,123,0,122,0,"CLIP"],[106,123,0,124,0,"CLIP"],[107,124,0,125,0,"CONDITIONING"],[108,122,0,125,1,"CONDITIONING"],[109,126,0,90,2,"WANVIDEOTEXTEMBEDS"],[110,76,0,75,2,"WANVIDLORA"],[112,75,0,86,0,"WANVIDEOMODEL"],[114,140,0,141,0,"IMAGE"],[116,8,0,33,2,"INT"],[118,144,0,145,0,"*"],[120,145,0,147,0,"*"],[121,22,0,148,0,"*"],[123,22,0,144,0,"INT,FLOAT,IMAGE,LATENT"],[125,13,1,154,0,"*"],[126,53,1,155,0,"*"],[130,161,0,163,0,"*"],[131,164,0,144,1,"INT,FLOAT,IMAGE,LATENT"],[132,146,0,88,11,"INT"],[133,13,0,33,0,"IMAGE"],[134,33,0,9,0,"IMAGE"],[135,170,0,171,0,"IMAGE"],[141,175,0,176,0,"FLOAT"],[142,171,0,178,0,"IMAGE"],[144,108,0,179,0,"IMAGE"],[145,184,0,56,0,"IMAGE"],[149,177,0,171,4,"INT"],[150,176,0,171,3,"INT"],[151,175,0,189,0,"INT,FLOAT,IMAGE,LATENT"],[152,177,0,189,1,"INT,FLOAT,IMAGE,LATENT"],[154,189,1,178,4,"FLOAT"],[165,97,0,88,4,"IMAGE"],[166,30,0,106,4,"FLOAT"],[169,96,0,208,0,"IMAGE"],[172,210,0,178,1,"AUDIO"],[188,222,3,228,0,"VHS_VIDEOINFO"],[191,214,0,28,0,"FLOAT"],[192,228,2,213,0,"*"],[208,238,0,75,1,"BLOCKSWAPARGS"],[231,42,0,43,1,"MASK"],[233,256,0,255,0,"POSE_KEYPOINT"],[234,255,0,37,2,"STRING"],[235,257,0,255,1,"INT"],[237,261,0,260,0,"POSE_KEYPOINT"],[238,262,0,260,1,"INT"],[239,260,0,56,1,"MASK"],[240,98,0,88,5,"IMAGE"],[241,99,0,88,6,"MASK"],[242,263,0,259,0,"*"]],"groups":[{"id":1,"title":"Load Video","bounding":[-320,-20,1100,1080],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Load Image Ref.","bounding":[820,-20,850,1080],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Mask Video","bounding":[2730,-20,1560,1080],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Pose","bounding":[1710,-20,970,1080],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"Wan Models","bounding":[-1850,-30,1490,1090],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"Generation","bounding":[-1850,1170,1660,1170],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"Video Collage","bounding":[4980,-20,1120,1190],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"Interpolate (Add more FPS)","bounding":[1710,1170,980,1190],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Track Face","bounding":[4320,-20,625.853271484375,730.7496948242188],"color":"#3f789e","font_size":24,"flags":{}},{"id":10,"title":"Sampler Output","bounding":[1050,1170,620,1190],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.1671841070450018,"offset":[32.30336981707492,-1313.9965345066614]},"frontendVersion":"1.26.13","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}